CREATE TABLE empresa (
  Emp_Cod int(11) NOT NULL AUTO_INCREMENT,
  Emp_Nome varchar(45) DEFAULT NULL,
  Emp_Email varchar(45) DEFAULT NULL,
  Emp_CNPJ varchar(45) DEFAULT NULL,
  PRIMARY KEY (Emp_Cod)
); 

CREATE TABLE usuario (
  Usu_Cod int(11) NOT NULL AUTO_INCREMENT,
  Emp_emp int(11) DEFAULT NULL,
  Usu_Nome varchar(45) DEFAULT NULL,
  Usu_Email varchar(45) DEFAULT NULL,
  Usu_CPF varchar(45) DEFAULT NULL,
  Usu_Senha varchar(45) DEFAULT NULL,
  PRIMARY KEY (Usu_Cod),
  FOREIGN KEY (Emp_emp) REFERENCES empresa (Emp_Cod)
);

CREATE TABLE tipocontagem (
  TC_Cod int(11) NOT NULL AUTO_INCREMENT,
  TC_Descricao varchar(45) DEFAULT NULL,
  PRIMARY KEY (TC_Cod)
);

CREATE TABLE tipo (
  TP_Cod int(11) NOT NULL AUTO_INCREMENT,
  TP_Descricao varchar(45) DEFAULT NULL,
  TC_Cod int(11) DEFAULT NULL,
  PRIMARY KEY (TP_Cod),
  FOREIGN KEY (TC_Cod) REFERENCES tipocontagem (TC_Cod)
);

CREATE TABLE fatorajusteperguntas (
  FAP_Cod int(11) NOT NULL,
  FAP_Caracteristica varchar(45) NOT NULL,
  TC_Cod int(11) NOT NULL,
  FAP_Peso float NOT NULL,
  PRIMARY KEY (FAP_Cod),
  FOREIGN KEY (TC_Cod) REFERENCES tipocontagem (TC_Cod)
);
 
CREATE TABLE projeto (
  Proj_Cod int(11) NOT NULL AUTO_INCREMENT,
  TC_Cod int(11) NOT NULL,
  Emp_Cod int(11) NOT NULL,
  Proj_Nome varchar(45) DEFAULT NULL,
  Proj_Descricao varchar(45) DEFAULT NULL,
  Proj_TempoContagem float DEFAULT NULL,
  Proj_TempoReal float DEFAULT NULL,
  Proj_Gerente varchar(45) DEFAULT NULL,
  Proj_DataInicio datetime DEFAULT NULL,
  Proj_DataTermino datetime DEFAULT NULL,
  Proj_DataP datetime DEFAULT NULL,
  Proj_FCT float DEFAULT NULL,
  PRIMARY KEY (Proj_Cod),
  FOREIGN KEY (TC_Cod) REFERENCES tipocontagem (TC_Cod),
  FOREIGN KEY (Emp_Cod) REFERENCES empresa (Emp_Cod)
);

CREATE TABLE fatorajuste (
  FA_Valor float NOT NULL,
  Proj_Cod int(11) NOT NULL,
  FAP_Cod int(11) NOT NULL,
  TC_Cod int(11) NOT NULL,
  PRIMARY KEY (Proj_Cod,FAP_Cod,TC_Cod),
  FOREIGN KEY (FAP_Cod) REFERENCES fatorajusteperguntas (FAP_Cod),
  FOREIGN KEY (Proj_Cod) REFERENCES projeto (Proj_Cod),
  FOREIGN KEY (TC_Cod) REFERENCES tipocontagem (TC_Cod)
);

CREATE TABLE baseline (
  BL_Cod` int(11) NOT NULL AUTO_INCREMENT,
  BL_TempoContagem float DEFAULT NULL,
  BL_TempoReal float DEFAULT NULL,
  BL_Descricao varchar(45) DEFAULT NULL,
  BL_Data datetime DEFAULT NULL,
  BL_NomeResponsavel varchar(45) DEFAULT NULL,
  Proj_Cod int(11) NOT NULL,
  PRIMARY KEY (BL_Cod,Proj_Cod),
  FOREIGN KEY (Proj_Cod) REFERENCES projeto (Proj_Cod)
);

CREATE TABLE pontoscasouso (
  BL_Cod int(11) NOT NULL,
  Proj_Cod int(11) NOT NULL,
  PCU_TamanhoEquipe int(11) DEFAULT NULL,
  PCU_HoraPlan int(11) DEFAULT NULL,
  PCU_HoraExec int(11) DEFAULT NULL,
  PCU_FA float DEFAULT NULL,
  PCU_FuncS int(11) DEFAULT NULL,
  PCU_FuncM int(11) DEFAULT NULL,
  PCU_FuncC int(11) DEFAULT NULL,
  PCU_PTCU float DEFAULT NULL,
  PRIMARY KEY (BL_Cod,Proj_Cod),
  FOREIGN KEY (BL_Cod) REFERENCES baseline (BL_Cod),
  FOREIGN KEY (Proj_Cod) REFERENCES projeto (Proj_Cod)
);

CREATE TABLE estimativacocomo (
  BL_Cod int(11) NOT NULL,
  Proj_Cod int(11) NOT NULL,
  EC_Descricao varchar(45) DEFAULT NULL,
  PRIMARY KEY (BL_Cod,Proj_Cod),
  FOREIGN KEY (BL_Cod) REFERENCES baseline (BL_Cod),
  FOREIGN KEY (Proj_Cod) REFERENCES projeto (Proj_Cod)
);

CREATE TABLE funcao (
  Fun_Cod int(11) NOT NULL,
  Proj_Cod int(11) NOT NULL,
  Fun_Nome varchar(45) DEFAULT NULL,
  Fun_SomaContagemReal float DEFAULT NULL,
  Fun_Caminho varchar(45) DEFAULT NULL,
  Fun_Tipo varchar(45) DEFAULT NULL,
  PRIMARY KEY (Fun_Cod,Proj_Cod),
  FOREIGN KEY (Proj_Cod) REFERENCES projeto (Proj_Cod)
);

CREATE TABLE contagem (
  Cont_Cod int(11) NOT NULL,
  Fun_Cod int(11) NOT NULL,
  TP_Cod int(11) NOT NULL,
  Proj_Cod int(11) NOT NULL,
  Cont_TE int(11) DEFAULT NULL,
  Cont_FA float DEFAULT NULL,
  Cont_Pre int(11) DEFAULT NULL,
  Cont_Pos int(11) DEFAULT NULL,
  Cont_Atores int(11) DEFAULT NULL,
  Cont_CPrin varchar(45) DEFAULT NULL,
  Cont_CAlter varchar(45) DEFAULT NULL,
  Cont_Descricao varchar(45) DEFAULT NULL,
  Cont_TD int(11) DEFAULT NULL,
  Cont_TR int(11) DEFAULT NULL,
  Cont_Complexidade varchar(45) DEFAULT NULL,
  Cont_Contribuicao int(11) DEFAULT NULL,
  Cont_NivelInfluencia int(11) DEFAULT NULL,
  Cont_LingProgramacao varchar(45) DEFAULT NULL,
  Cont_ValorKloc int(11) DEFAULT NULL,
  PRIMARY KEY (Fun_Cod,TP_Cod,Proj_Cod,Cont_Cod),
  FOREIGN KEY (Fun_Cod) REFERENCES funcao (Fun_Cod),
  FOREIGN KEY (TP_Cod) REFERENCES tipo (TP_Cod),
  FOREIGN KEY (Proj_Cod) REFERENCES projeto (Proj_Cod)
);